{"2405.14430": {"publish_time": "2024-05-23", "title": "PipeFusion: Displaced Patch Pipeline Parallelism for Inference of Diffusion Transformer Models", "paper_summary": "This paper introduces PipeFusion, a novel approach that harnesses multi-GPU\nparallelism to address the high computational and latency challenges of\ngenerating high-resolution images with diffusion transformers (DiT) models.\nPipeFusion splits images into patches and distributes the network layers across\nmultiple devices. It employs a pipeline parallel manner to orchestrate\ncommunication and computations. By leveraging the high similarity between the\ninput from adjacent diffusion steps, PipeFusion eliminates the waiting time in\nthe pipeline by reusing the one-step stale feature maps to provide context for\nthe current step. Our experiments demonstrate that it can generate higher image\nresolution where existing DiT parallel approaches meet OOM. PipeFusion\nsignificantly reduces the required communication bandwidth, enabling DiT\ninference to be hosted on GPUs connected via PCIe rather than the more costly\nNVLink infrastructure, which substantially lowers the overall operational\nexpenses for serving DiT models. Our code is publicly available at\nhttps://github.com/PipeFusion/PipeFusion.", "paper_summary_zh": "\u672c\u6587\u4ecb\u7d39 PipeFusion\uff0c\u4e00\u7a2e\u65b0\u7a4e\u7684\u65b9\u6cd5\uff0c\u5b83\u5229\u7528\u591a GPU \u4e26\u884c\u904b\u7b97\u4f86\u89e3\u6c7a\u4f7f\u7528\u64f4\u6563Transformer (DiT) \u6a21\u578b\u7522\u751f\u9ad8\u89e3\u6790\u5ea6\u5f71\u50cf\u6642\u6240\u9762\u81e8\u7684\u9ad8\u904b\u7b97\u548c\u5ef6\u9072\u6311\u6230\u3002\nPipeFusion \u5c07\u5f71\u50cf\u5206\u5272\u6210\u5340\u584a\uff0c\u4e26\u5c07\u7db2\u8def\u5c64\u5206\u4f48\u5728\u591a\u500b\u88dd\u7f6e\u4e0a\u3002\u5b83\u63a1\u7528\u6d41\u6c34\u7dda\u4e26\u884c\u65b9\u5f0f\u4f86\u5354\u8abf\u901a\u8a0a\u548c\u904b\u7b97\u3002\u900f\u904e\u5229\u7528\u76f8\u9130\u64f4\u6563\u6b65\u9a5f\u4e4b\u9593\u8f38\u5165\u7684\u9ad8\u76f8\u4f3c\u6027\uff0cPipeFusion \u900f\u904e\u91cd\u8907\u4f7f\u7528\u4e00\u6b65\u820a\u7684\u7279\u5fb5\u5716\u4f86\u63d0\u4f9b\u7576\u524d\u6b65\u9a5f\u7684\u80cc\u666f\uff0c\u5f9e\u800c\u6d88\u9664\u4e86\u6d41\u6c34\u7dda\u4e2d\u7684\u7b49\u5f85\u6642\u9593\u3002\u6211\u5011\u7684\u5be6\u9a57\u8868\u660e\uff0c\u5b83\u53ef\u4ee5\u5728\u73fe\u6709 DiT \u4e26\u884c\u65b9\u6cd5\u9047\u5230 OOM \u7684\u60c5\u6cc1\u4e0b\u7522\u751f\u66f4\u9ad8\u7684\u5f71\u50cf\u89e3\u6790\u5ea6\u3002PipeFusion \u5927\u5e45\u964d\u4f4e\u4e86\u6240\u9700\u7684\u901a\u8a0a\u983b\u5bec\uff0c\u4f7f DiT \u63a8\u8ad6\u80fd\u5920\u5728\u900f\u904e PCIe \u9023\u63a5\u7684 GPU \u4e0a\u57f7\u884c\uff0c\u800c\u4e0d\u662f\u6210\u672c\u66f4\u9ad8\u7684 NVLink \u57fa\u790e\u67b6\u69cb\uff0c\u9019\u5927\u5e45\u964d\u4f4e\u4e86\u670d\u52d9 DiT \u6a21\u578b\u7684\u6574\u9ad4\u71df\u904b\u958b\u92b7\u3002\u6211\u5011\u7684\u7a0b\u5f0f\u78bc\u5df2\u516c\u958b\u65bc https://github.com/PipeFusion/PipeFusion\u3002", "author": "Jiannan Wang et.al.", "authors": "Jiannan Wang, Jiarui Fang, Aoyu Li, PengCheng Yang", "id": "2405.14430v1", "paper_url": "http://arxiv.org/abs/2405.14430v1", "repo": "null"}}