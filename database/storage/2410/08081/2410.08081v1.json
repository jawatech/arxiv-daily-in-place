{"2410.08081": {"publish_time": "2024-10-10", "title": "Packing Analysis: Packing Is More Appropriate for Large Models or Datasets in Supervised Fine-tuning", "paper_summary": "Packing, initially utilized in the pre-training phase, is an optimization\ntechnique designed to maximize hardware resource efficiency by combining\ndifferent training sequences to fit the model's maximum input length. Although\nit has demonstrated effectiveness during pre-training, there remains a lack of\ncomprehensive analysis for the supervised fine-tuning (SFT) stage on the\nfollowing points: (1) whether packing can effectively enhance training\nefficiency while maintaining performance, (2) the suitable size of the model\nand dataset for fine-tuning with the packing method, and (3) whether packing\nunrelated or related training samples might cause the model to either\nexcessively disregard or over-rely on the context.\n  In this paper, we perform extensive comparisons between SFT methods using\npadding and packing, covering SFT datasets ranging from 69K to 1.2M and models\nfrom 8B to 70B. This provides the first comprehensive analysis of the\nadvantages and limitations of packing versus padding, as well as practical\nconsiderations for implementing packing in various training scenarios. Our\nanalysis covers various benchmarks, including knowledge, reasoning, and coding,\nas well as GPT-based evaluations, time efficiency, and other fine-tuning\nparameters. We also open-source our code for fine-tuning and evaluation and\nprovide checkpoints fine-tuned on datasets of different sizes, aiming to\nadvance future research on packing methods. Code is available at:\nhttps://github.com/ShuheWang1998/Packing-Analysis?tab=readme-ov-file.", "paper_summary_zh": "<paragraph>\u5728\u9810\u8a13\u7df4\u968e\u6bb5\u6700\u521d\u4f7f\u7528\u7684\u5c01\u88dd\u662f\u4e00\u7a2e\u6700\u4f73\u5316\u6280\u8853\uff0c\u65e8\u5728\u900f\u904e\u7d50\u5408\u4e0d\u540c\u7684\u8a13\u7df4\u5e8f\u5217\u4ee5\u7b26\u5408\u6a21\u578b\u7684\u6700\u5927\u8f38\u5165\u9577\u5ea6\u4f86\u6700\u5927\u5316\u786c\u9ad4\u8cc7\u6e90\u6548\u7387\u3002\u5118\u7ba1\u5b83\u5df2\u5728\u9810\u8a13\u7df4\u904e\u7a0b\u4e2d\u8b49\u660e\u5176\u6709\u6548\u6027\uff0c\u4f46\u91dd\u5c0d\u76e3\u7763\u5f0f\u5fae\u8abf (SFT) \u968e\u6bb5\u4ecd\u7f3a\u4e4f\u4ee5\u4e0b\u65b9\u9762\u7684\u5168\u9762\u5206\u6790\uff1a(1) \u5c01\u88dd\u662f\u5426\u80fd\u6709\u6548\u63d0\u5347\u8a13\u7df4\u6548\u7387\uff0c\u540c\u6642\u7dad\u6301\u6548\u80fd\uff0c(2) \u9069\u7528\u65bc\u5c01\u88dd\u65b9\u6cd5\u5fae\u8abf\u7684\u6a21\u578b\u548c\u8cc7\u6599\u96c6\u7684\u9069\u7576\u5927\u5c0f\uff0c\u4ee5\u53ca (3) \u5c01\u88dd\u7121\u95dc\u6216\u76f8\u95dc\u7684\u8a13\u7df4\u6a23\u672c\u662f\u5426\u53ef\u80fd\u5c0e\u81f4\u6a21\u578b\u904e\u5ea6\u5ffd\u7565\u6216\u904e\u5ea6\u4f9d\u8cf4\u4e0a\u4e0b\u6587\u3002\n\u5728\u672c\u8ad6\u6587\u4e2d\uff0c\u6211\u5011\u5c0d\u4f7f\u7528\u586b\u5145\u548c\u5c01\u88dd\u7684 SFT \u65b9\u6cd5\u9032\u884c\u5ee3\u6cdb\u6bd4\u8f03\uff0c\u6db5\u84cb\u5f9e 69K \u5230 1.2M \u7684 SFT \u8cc7\u6599\u96c6\u548c\u5f9e 8B \u5230 70B \u7684\u6a21\u578b\u3002\u9019\u63d0\u4f9b\u4e86\u5c01\u88dd\u76f8\u5c0d\u65bc\u586b\u5145\u7684\u512a\u7f3a\u9ede\uff0c\u4ee5\u53ca\u5728\u5404\u7a2e\u8a13\u7df4\u5834\u666f\u4e2d\u5be6\u4f5c\u5c01\u88dd\u7684\u5be6\u52d9\u8003\u91cf\u7684\u9996\u6b21\u5168\u9762\u5206\u6790\u3002\u6211\u5011\u7684\u5206\u6790\u6db5\u84cb\u5404\u7a2e\u57fa\u6e96\uff0c\u5305\u62ec\u77e5\u8b58\u3001\u63a8\u7406\u548c\u7de8\u78bc\uff0c\u4ee5\u53ca\u57fa\u65bc GPT \u7684\u8a55\u4f30\u3001\u6642\u9593\u6548\u7387\u548c\u5176\u4ed6\u5fae\u8abf\u53c3\u6578\u3002\u6211\u5011\u4e5f\u958b\u653e\u539f\u59cb\u78bc\u9032\u884c\u5fae\u8abf\u548c\u8a55\u4f30\uff0c\u4e26\u63d0\u4f9b\u91dd\u5c0d\u4e0d\u540c\u5927\u5c0f\u8cc7\u6599\u96c6\u5fae\u8abf\u7684\u6aa2\u67e5\u9ede\uff0c\u76ee\u6a19\u662f\u63a8\u9032\u5c01\u88dd\u65b9\u6cd5\u7684\u672a\u4f86\u7814\u7a76\u3002\u7a0b\u5f0f\u78bc\u53ef\u65bc\u6b64\u8655\u53d6\u5f97\uff1a\nhttps://github.com/ShuheWang1998/Packing-Analysis?tab=readme-ov-file\u3002</paragraph>", "author": "Shuhe Wang et.al.", "authors": "Shuhe Wang, Guoyin Wang, Jiwei Li, Eduard Hovy, Chen Guo", "id": "2410.08081v1", "paper_url": "http://arxiv.org/abs/2410.08081v1", "repo": "https://github.com/shuhewang1998/packing-analysis"}}