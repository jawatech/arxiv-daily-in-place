{"2410.14442": {"publish_time": "2024-10-18", "title": "A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference", "paper_summary": "Recently, sharing key-value (KV) cache across layers has been found effective\nin efficient inference of large language models (LLMs). To systematically\ninvestigate different techniques of cross-layer KV sharing, we propose a\nunified framework that covers several recent methods and their novel variants.\nWe conduct comprehensive experiments on all the configurations of the\nframework, evaluating their generation throughput and performance in language\nmodeling and downstream tasks. We find that when reducing the size of the KV\ncache by 2x, most configurations can achieve competitive performance to and\nhigher throughput than standard transformers, but when further reducing the\nsize of the KV cache, pairing queries of all layers with KVs of upper layers\ncan better maintain performance, although it also introduces additional\ntraining cost and prefilling latency. We hope that this work will help users\nchoose the appropriate approach according to their requirements and facilitate\nresearch on the acceleration of LLM inference.", "paper_summary_zh": "\u6700\u8fd1\uff0c\u767c\u73fe\u8de8\u5c64\u5171\u4eab\u9375\u503c (KV) \u5feb\u53d6\u5728\u5927\u578b\u8a9e\u8a00\u6a21\u578b (LLM) \u7684\u9ad8\u6548\u63a8\u7406\u4e2d\u5f88\u6709\u6548\u3002\u70ba\u4e86\u7cfb\u7d71\u5730\u7814\u7a76\u8de8\u5c64 KV \u5171\u4eab\u7684\u4e0d\u540c\u6280\u8853\uff0c\u6211\u5011\u63d0\u51fa\u4e86\u4e00\u500b\u7d71\u4e00\u7684\u6846\u67b6\uff0c\u6db5\u84cb\u4e86\u5e7e\u7a2e\u6700\u8fd1\u7684\u65b9\u6cd5\u53ca\u5176\u65b0\u7a4e\u7684\u8b8a\u9ad4\u3002\u6211\u5011\u5c0d\u6846\u67b6\u7684\u6240\u6709\u914d\u7f6e\u9032\u884c\u4e86\u5168\u9762\u7684\u5be6\u9a57\uff0c\u8a55\u4f30\u4e86\u5b83\u5011\u5728\u8a9e\u8a00\u5efa\u6a21\u548c\u4e0b\u6e38\u4efb\u52d9\u4e2d\u7684\u751f\u6210\u541e\u5410\u91cf\u548c\u6548\u80fd\u3002\u6211\u5011\u767c\u73fe\uff0c\u7576\u5c07 KV \u5feb\u53d6\u7684\u5927\u5c0f\u6e1b\u5c11 2 \u500d\u6642\uff0c\u5927\u591a\u6578\u914d\u7f6e\u90fd\u53ef\u4ee5\u9054\u5230\u8207\u6a19\u6e96Transformer\u76f8\u7576\u7684\u6548\u80fd\u548c\u66f4\u9ad8\u7684\u541e\u5410\u91cf\uff0c\u4f46\u7576\u9032\u4e00\u6b65\u6e1b\u5c11 KV \u5feb\u53d6\u7684\u5927\u5c0f\u6642\uff0c\u5c07\u6240\u6709\u5c64\u7684\u67e5\u8a62\u8207\u4e0a\u5c64\u7684 KV \u914d\u5c0d\u53ef\u4ee5\u66f4\u597d\u5730\u7dad\u6301\u6548\u80fd\uff0c\u5118\u7ba1\u5b83\u4e5f\u6703\u5f15\u5165\u984d\u5916\u7684\u8a13\u7df4\u6210\u672c\u548c\u9810\u586b\u5145\u5ef6\u9072\u3002\u6211\u5011\u5e0c\u671b\u9019\u9805\u5de5\u4f5c\u5c07\u5e6b\u52a9\u4f7f\u7528\u8005\u6839\u64da\u81ea\u5df1\u7684\u9700\u6c42\u9078\u64c7\u9069\u7576\u7684\u65b9\u6cd5\uff0c\u4e26\u4fc3\u9032\u5c0d LLM \u63a8\u7406\u52a0\u901f\u7684\u7814\u7a76\u3002", "author": "You Wu et.al.", "authors": "You Wu, Haoyi Wu, Kewei Tu", "id": "2410.14442v1", "paper_url": "http://arxiv.org/abs/2410.14442v1", "repo": "https://github.com/whyNLP/LCKV"}}