{"2411.05735": {"publish_time": "2024-11-08", "title": "Aioli: A Unified Optimization Framework for Language Model Data Mixing", "paper_summary": "Language model performance depends on identifying the optimal mixture of data\ngroups to train on (e.g., law, code, math). Prior work has proposed a diverse\nset of methods to efficiently learn mixture proportions, ranging from fitting\nregression models over training runs to dynamically updating proportions\nthroughout training. Surprisingly, we find that no existing method consistently\noutperforms a simple stratified sampling baseline in terms of average test\nperplexity per group. In this paper, we study the cause of this inconsistency\nby unifying existing methods into a standard optimization framework. We show\nthat all methods set proportions to minimize total loss, subject to a\nmethod-specific mixing law -- an assumption on how loss is a function of\nmixture proportions. We find that existing parameterizations of mixing laws can\nexpress the true loss-proportion relationship empirically, but the methods\nthemselves often set the mixing law parameters inaccurately, resulting in poor\nand inconsistent performance. Finally, we leverage the insights from our\nframework to derive a new online method named Aioli, which directly estimates\nthe mixing law parameters throughout training and uses them to dynamically\nadjust proportions. Empirically, Aioli outperforms stratified sampling on 6 out\nof 6 datasets by an average of 0.28 test perplexity points, whereas existing\nmethods fail to consistently beat stratified sampling, doing up to 6.9 points\nworse. Moreover, in a practical setting where proportions are learned on\nshorter runs due to computational constraints, Aioli can dynamically adjust\nthese proportions over the full training run, consistently improving\nperformance over existing methods by up to 12.01 test perplexity points.", "paper_summary_zh": "<paragraph>\u8a9e\u8a00\u6a21\u578b\u7684\u6548\u80fd\u53d6\u6c7a\u65bc\u8fa8\u8b58\u7528\u65bc\u8a13\u7df4\u7684\u6700\u4f73\u8cc7\u6599\u7fa4\u7d44\u7d44\u5408\uff08\u4f8b\u5982\u6cd5\u5f8b\u3001\u7a0b\u5f0f\u78bc\u3001\u6578\u5b78\uff09\u3002\u5148\u524d\u7684\u7814\u7a76\u5df2\u63d0\u51fa\u5404\u7a2e\u65b9\u6cd5\u4f86\u6709\u6548\u5b78\u7fd2\u6df7\u5408\u6bd4\u4f8b\uff0c\u5f9e\u64ec\u5408\u8a13\u7df4\u57f7\u884c\u968e\u6bb5\u7684\u56de\u6b78\u6a21\u578b\u5230\u52d5\u614b\u66f4\u65b0\u8a13\u7df4\u671f\u9593\u7684\u6bd4\u4f8b\u3002\u4ee4\u4eba\u9a5a\u8a1d\u7684\u662f\uff0c\u6211\u5011\u767c\u73fe\u6c92\u6709\u73fe\u6709\u65b9\u6cd5\u5728\u5e73\u5747\u6bcf\u7d44\u6e2c\u8a66\u56f0\u60d1\u5ea6\u65b9\u9762\u59cb\u7d42\u512a\u65bc\u7c21\u55ae\u7684\u5206\u5c64\u62bd\u6a23\u57fa\u6e96\u7dda\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u5011\u900f\u904e\u5c07\u73fe\u6709\u65b9\u6cd5\u7d71\u4e00\u5230\u4e00\u500b\u6a19\u6e96\u7684\u6700\u4f73\u5316\u67b6\u69cb\u4e2d\u4f86\u7814\u7a76\u9019\u7a2e\u4e0d\u4e00\u81f4\u6027\u7684\u539f\u56e0\u3002\u6211\u5011\u8aaa\u660e\u6240\u6709\u65b9\u6cd5\u90fd\u6703\u8a2d\u5b9a\u6bd4\u4f8b\u4ee5\u6700\u5c0f\u5316\u7e3d\u640d\u5931\uff0c\u4f46\u9700\u9075\u5b88\u7279\u5b9a\u65bc\u65b9\u6cd5\u7684\u6df7\u5408\u5b9a\u5f8b\uff0c\u4e5f\u5c31\u662f\u640d\u5931\u5982\u4f55\u6210\u70ba\u6df7\u5408\u6bd4\u4f8b\u7684\u51fd\u6578\u7684\u5047\u8a2d\u3002\u6211\u5011\u767c\u73fe\u73fe\u6709\u6df7\u5408\u5b9a\u5f8b\u7684\u53c3\u6578\u5316\u53ef\u4ee5\u6839\u64da\u7d93\u9a57\u8868\u9054\u771f\u6b63\u7684\u640d\u5931\u6bd4\u4f8b\u95dc\u4fc2\uff0c\u4f46\u9019\u4e9b\u65b9\u6cd5\u672c\u8eab\u901a\u5e38\u6703\u4e0d\u6e96\u78ba\u5730\u8a2d\u5b9a\u6df7\u5408\u5b9a\u5f8b\u53c3\u6578\uff0c\u5c0e\u81f4\u6548\u80fd\u4e0d\u4f73\u4e14\u4e0d\u4e00\u81f4\u3002\u6700\u5f8c\uff0c\u6211\u5011\u5229\u7528\u6211\u5011\u67b6\u69cb\u4e2d\u7684\u898b\u89e3\uff0c\u63a8\u5c0e\u51fa\u4e00\u7a2e\u540d\u70ba Aioli \u7684\u65b0\u7684\u7dda\u4e0a\u65b9\u6cd5\uff0c\u5b83\u6703\u76f4\u63a5\u4f30\u8a08\u8a13\u7df4\u671f\u9593\u7684\u6df7\u5408\u5b9a\u5f8b\u53c3\u6578\uff0c\u4e26\u4f7f\u7528\u9019\u4e9b\u53c3\u6578\u52d5\u614b\u8abf\u6574\u6bd4\u4f8b\u3002\u6839\u64da\u7d93\u9a57\uff0cAioli \u5728 6 \u500b\u8cc7\u6599\u96c6\u4e2d\u6709 6 \u500b\u7684\u8868\u73fe\u512a\u65bc\u5206\u5c64\u62bd\u6a23\uff0c\u5e73\u5747\u6e2c\u8a66\u56f0\u60d1\u5ea6\u9ede\u6578\u70ba 0.28\uff0c\u800c\u73fe\u6709\u65b9\u6cd5\u7121\u6cd5\u59cb\u7d42\u512a\u65bc\u5206\u5c64\u62bd\u6a23\uff0c\u8868\u73fe\u6700\u591a\u5dee 6.9 \u9ede\u3002\u6b64\u5916\uff0c\u5728\u7531\u65bc\u8a08\u7b97\u9650\u5236\u800c\u5fc5\u9808\u5728\u8f03\u77ed\u7684\u57f7\u884c\u968e\u6bb5\u5b78\u7fd2\u6bd4\u4f8b\u7684\u5be6\u969b\u8a2d\u5b9a\u4e2d\uff0cAioli \u53ef\u4ee5\u52d5\u614b\u8abf\u6574\u9019\u4e9b\u6bd4\u4f8b\uff0c\u5728\u6574\u500b\u8a13\u7df4\u57f7\u884c\u968e\u6bb5\u59cb\u7d42\u6539\u5584\u6548\u80fd\uff0c\u8207\u73fe\u6709\u65b9\u6cd5\u76f8\u6bd4\uff0c\u6700\u591a\u53ef\u6539\u5584 12.01 \u500b\u6e2c\u8a66\u56f0\u60d1\u5ea6\u9ede\u6578\u3002</paragraph>", "author": "Mayee F. Chen et.al.", "authors": "Mayee F. Chen, Michael Y. Hu, Nicholas Lourie, Kyunghyun Cho, Christopher R\u00e9", "id": "2411.05735v1", "paper_url": "http://arxiv.org/abs/2411.05735v1", "repo": "null"}}