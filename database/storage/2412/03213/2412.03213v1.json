{"2412.03213": {"publish_time": "2024-12-04", "title": "ClusterKV: Manipulating LLM KV Cache in Semantic Space for Recallable Compression", "paper_summary": "Large Language Models (LLMs) have been widely deployed in a variety of\napplications, and the context length is rapidly increasing to handle tasks such\nas long-document QA and complex logical reasoning. However, long context poses\nsignificant challenges for inference efficiency, including high memory costs of\nkey-value (KV) cache and increased latency due to extensive memory accesses.\nRecent works have proposed compressing KV cache to approximate computation, but\nthese methods either evict tokens permanently, never recalling them for later\ninference, or recall previous tokens at the granularity of pages divided by\ntextual positions. Both approaches degrade the model accuracy and output\nquality. To achieve efficient and accurate recallable KV cache compression, we\nintroduce ClusterKV, which recalls tokens at the granularity of semantic\nclusters. We design and implement efficient algorithms and systems for\nclustering, selection, indexing and caching. Experiment results show that\nClusterKV attains negligible accuracy loss across various tasks with 32k\ncontext lengths, using only a 1k to 2k KV cache budget, and achieves up to a\n2$\\times$ speedup in latency and a 2.5$\\times$ improvement in decoding\nthroughput. Compared to SoTA recallable KV compression methods, ClusterKV\ndemonstrates higher model accuracy and output quality, while maintaining or\nexceeding inference efficiency.", "paper_summary_zh": "\u5927\u578b\u8a9e\u8a00\u6a21\u578b (LLM) \u5df2\u5ee3\u6cdb\u90e8\u7f72\u65bc\u5404\u7a2e\u61c9\u7528\u7a0b\u5f0f\u4e2d\uff0c\u4e14\u80cc\u666f\u9577\u5ea6\u8fc5\u901f\u589e\u52a0\uff0c\u4ee5\u8655\u7406\u9577\u6587\u4ef6\u554f\u7b54\u548c\u8907\u96dc\u908f\u8f2f\u63a8\u7406\u7b49\u4efb\u52d9\u3002\u7136\u800c\uff0c\u9577\u80cc\u666f\u5c0d\u63a8\u8ad6\u6548\u7387\u69cb\u6210\u91cd\u5927\u6311\u6230\uff0c\u5305\u62ec\u9375\u503c (KV) \u5feb\u53d6\u7684\u9ad8\u8a18\u61b6\u9ad4\u6210\u672c\uff0c\u4ee5\u53ca\u7531\u65bc\u5927\u91cf\u8a18\u61b6\u9ad4\u5b58\u53d6\u800c\u589e\u52a0\u7684\u5ef6\u9072\u3002\u6700\u8fd1\u7684\u7814\u7a76\u5df2\u63d0\u51fa\u58d3\u7e2e KV \u5feb\u53d6\u4ee5\u8fd1\u4f3c\u8a08\u7b97\uff0c\u4f46\u9019\u4e9b\u65b9\u6cd5\u6703\u6c38\u4e45\u9a45\u9010\u6b0a\u6756\uff0c\u6c38\u9060\u4e0d\u6703\u5728\u5f8c\u7e8c\u63a8\u8ad6\u4e2d\u63d0\u53d6\u5b83\u5011\uff0c\u6216\u5728\u7531\u6587\u5b57\u4f4d\u7f6e\u5283\u5206\u7684\u9801\u9762\u7c92\u5ea6\u4e2d\u63d0\u53d6\u5148\u524d\u7684\u6b0a\u6756\u3002\u9019\u5169\u7a2e\u65b9\u6cd5\u90fd\u6703\u964d\u4f4e\u6a21\u578b\u6e96\u78ba\u5ea6\u548c\u8f38\u51fa\u54c1\u8cea\u3002\u70ba\u4e86\u9054\u6210\u6709\u6548\u4e14\u6e96\u78ba\u7684\u53ef\u63d0\u53d6 KV \u5feb\u53d6\u58d3\u7e2e\uff0c\u6211\u5011\u5f15\u5165\u4e86 ClusterKV\uff0c\u5b83\u5728\u8a9e\u7fa9\u53e2\u96c6\u7684\u7c92\u5ea6\u4e2d\u63d0\u53d6\u6b0a\u6756\u3002\u6211\u5011\u8a2d\u8a08\u4e26\u5be6\u4f5c\u4e86\u7528\u65bc\u53e2\u96c6\u3001\u9078\u64c7\u3001\u7d22\u5f15\u548c\u5feb\u53d6\u7684\u6709\u6548\u6f14\u7b97\u6cd5\u548c\u7cfb\u7d71\u3002\u5be6\u9a57\u7d50\u679c\u986f\u793a\uff0cClusterKV \u5728\u5404\u7a2e\u4efb\u52d9\u4e2d\u7372\u5f97\u6975\u5c0f\u7684\u6e96\u78ba\u5ea6\u640d\u5931\uff0c\u80cc\u666f\u9577\u5ea6\u70ba 32k\uff0c\u50c5\u4f7f\u7528 1k \u5230 2k \u7684 KV \u5feb\u53d6\u9810\u7b97\uff0c\u4e26\u5728\u5ef6\u9072\u4e2d\u5be6\u73fe\u4e86\u9ad8\u9054 2 \u500d\u7684\u52a0\u901f\uff0c\u4ee5\u53ca\u5728\u89e3\u78bc\u8655\u7406\u91cf\u4e2d\u5be6\u73fe\u4e86 2.5 \u500d\u7684\u63d0\u5347\u3002\u8207 SoTA \u53ef\u63d0\u53d6 KV \u58d3\u7e2e\u65b9\u6cd5\u76f8\u6bd4\uff0cClusterKV \u5c55\u793a\u4e86\u66f4\u9ad8\u7684\u6a21\u578b\u6e96\u78ba\u5ea6\u548c\u8f38\u51fa\u54c1\u8cea\uff0c\u540c\u6642\u7dad\u6301\u6216\u8d85\u8d8a\u63a8\u8ad6\u6548\u7387\u3002", "author": "Guangda Liu et.al.", "authors": "Guangda Liu, Chengwei Li, Jieru Zhao, Chenqi Zhang, Minyi Guo", "id": "2412.03213v1", "paper_url": "http://arxiv.org/abs/2412.03213v1", "repo": "null"}}