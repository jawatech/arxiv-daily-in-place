{"2411.18462": {"publish_time": "2024-11-27", "title": "Draft Model Knows When to Stop: A Self-Verification Length Policy for Speculative Decoding", "paper_summary": "Speculative Decoding (SD) has become an important technique in accelerating\nthe inference speed of large language models. Conventional SD methods employ a\nfixed draft length, which ignores the token generation difficulty across tasks.\nConsequently, in this paper, we address such an issue and introduce SVIP - a\ndifficulty-aware dynamic draft length policy for speculative decoding systems.\nBased on a theoretical lower bound of draft token acceptance rate and its\ninference-time approximation, SVIP adaptively determines the lengths of draft\nsequences based on the entropy of each draft token distribution. Experimental\nresults on mainstream SD benchmarks and frameworks demonstrate the superior\nperformance of SVIP, achieving up to 20\\% walltime speedup on SpecBench over\nbaseline SD methods and 60\\% speedup on MT-Bench for long-form generation of up\nto 8K tokens. Moreover, SVIP is totally training-free and compatible with any\nexisting SD methods that generate draft tokens autoregressively. Experimental\nresults also show that SVIP yields consistent walltime improvement on top of\nGliDe & CaPE and EAGLE-2.", "paper_summary_zh": "\u63a8\u6e2c\u89e3\u78bc (SD) \u5df2\u6210\u70ba\u52a0\u901f\u5927\u578b\u8a9e\u8a00\u6a21\u578b\u63a8\u8ad6\u901f\u5ea6\u7684\u4e00\u9805\u91cd\u8981\u6280\u8853\u3002\u50b3\u7d71\u7684 SD \u65b9\u6cd5\u63a1\u7528\u56fa\u5b9a\u7684\u8349\u7a3f\u9577\u5ea6\uff0c\u9019\u6703\u5ffd\u7565\u8de8\u4efb\u52d9\u7684\u6a19\u8a18\u751f\u6210\u96e3\u5ea6\u3002\u56e0\u6b64\uff0c\u5728\u672c\u6587\u4e2d\uff0c\u6211\u5011\u63a2\u8a0e\u4e86\u9019\u6a23\u7684\u554f\u984c\uff0c\u4e26\u5f15\u5165\u4e86 SVIP - \u4e00\u7a2e\u91dd\u5c0d\u63a8\u6e2c\u89e3\u78bc\u7cfb\u7d71\u7684\u96e3\u5ea6\u611f\u77e5\u52d5\u614b\u8349\u7a3f\u9577\u5ea6\u7b56\u7565\u3002\u57fa\u65bc\u8349\u7a3f\u6a19\u8a18\u63a5\u53d7\u7387\u7684\u7406\u8ad6\u4e0b\u754c\u53ca\u5176\u63a8\u8ad6\u6642\u9593\u8fd1\u4f3c\u503c\uff0cSVIP \u6703\u6839\u64da\u6bcf\u500b\u8349\u7a3f\u6a19\u8a18\u5206\u4f48\u7684\u71b5\u81ea\u9069\u61c9\u5730\u78ba\u5b9a\u8349\u7a3f\u5e8f\u5217\u7684\u9577\u5ea6\u3002\u4e3b\u6d41 SD \u57fa\u6e96\u548c\u6846\u67b6\u4e0a\u7684\u5be6\u9a57\u7d50\u679c\u8b49\u660e\u4e86 SVIP \u7684\u512a\u7570\u6027\u80fd\uff0c\u5728 SpecBench \u4e0a\u6bd4\u57fa\u7dda SD \u65b9\u6cd5\u5be6\u73fe\u4e86\u9ad8\u9054 20% \u7684\u7246\u4e0a\u6642\u9593\u52a0\u901f\uff0c\u5728 MT-Bench \u4e0a\u5be6\u73fe\u4e86 60% \u7684\u52a0\u901f\uff0c\u7528\u65bc\u9577\u9054 8K \u6a19\u8a18\u7684\u9577\u683c\u5f0f\u751f\u6210\u3002\u6b64\u5916\uff0cSVIP \u5b8c\u5168\u7121\u9700\u8a13\u7df4\uff0c\u4e26\u4e14\u8207\u4efb\u4f55\u751f\u6210\u8349\u7a3f\u6a19\u8a18\u81ea\u8ff4\u6b78\u7684\u73fe\u6709 SD \u65b9\u6cd5\u76f8\u5bb9\u3002\u5be6\u9a57\u7d50\u679c\u9084\u8868\u660e\uff0cSVIP \u5728 GliDe \u548c CaPE \u4ee5\u53ca EAGLE-2 \u4e4b\u4e0a\u7522\u751f\u4e86\u4e00\u81f4\u7684\u7246\u4e0a\u6642\u9593\u6539\u9032\u3002", "author": "Ziyin Zhang et.al.", "authors": "Ziyin Zhang, Jiahao Xu, Tian Liang, Xingyu Chen, Zhiwei He, Rui Wang, Zhaopeng Tu", "id": "2411.18462v1", "paper_url": "http://arxiv.org/abs/2411.18462v1", "repo": "https://github.com/geralt-targaryen/svip"}}