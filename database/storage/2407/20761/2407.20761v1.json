{"2407.20761": {"publish_time": "2024-07-30", "title": "OmniBal: Towards Fast Instruct-tuning for Vision-Language Models via Omniverse Computation Balance", "paper_summary": "Recently, vision-language instruct-tuning models have made significant\nprogress due to their more comprehensive understanding of the world. In this\nwork, we discovered that large-scale 3D parallel training on those models leads\nto an imbalanced computation load across different devices. The vision and\nlanguage parts are inherently heterogeneous: their data distribution and model\narchitecture differ significantly, which affects distributed training\nefficiency. We rebalanced the computational loads from data, model, and memory\nperspectives to address this issue, achieving more balanced computation across\ndevices. These three components are not independent but are closely connected,\nforming an omniverse balanced training framework. Specifically, for the data,\nwe grouped instances into new balanced mini-batches within and across devices.\nFor the model, we employed a search-based method to achieve a more balanced\npartitioning. For memory optimization, we adaptively adjusted the\nre-computation strategy for each partition to utilize the available memory\nfully. We conducted extensive experiments to validate the effectiveness of our\nmethod. Compared with the open-source training code of InternVL-Chat, we\nsignificantly reduced GPU days, achieving about 1.8x speed-up. Our method's\nefficacy and generalizability were further demonstrated across various models\nand datasets. Codes will be released at https://github.com/ModelTC/OmniBal.", "paper_summary_zh": "\u8fd1\u671f\uff0c\u89c6\u89c9\u8bed\u8a00\u6307\u4ee4\u8c03\u4f18\u6a21\u578b\u56e0\u5176\u5bf9\u4e16\u754c\u7684\u66f4\u5168\u9762\u7406\u89e3\u800c\u53d6\u5f97\u4e86\u91cd\u5927\u8fdb\u5c55\u3002\u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u5bf9\u8fd9\u4e9b\u6a21\u578b\u8fdb\u884c\u5927\u89c4\u6a21 3D \u5e76\u884c\u8bad\u7ec3\u4f1a\u5bfc\u81f4\u4e0d\u540c\u8bbe\u5907\u4e4b\u95f4\u7684\u8ba1\u7b97\u8d1f\u8f7d\u4e0d\u5e73\u8861\u3002\u89c6\u89c9\u548c\u8bed\u8a00\u90e8\u5206\u672c\u8d28\u4e0a\u662f\u5f02\u6784\u7684\uff1a\u5b83\u4eec\u7684\u6570\u636e\u5206\u5e03\u548c\u6a21\u578b\u67b6\u6784\u5dee\u5f02\u5f88\u5927\uff0c\u8fd9\u4f1a\u5f71\u54cd\u5206\u5e03\u5f0f\u8bad\u7ec3\u6548\u7387\u3002\u6211\u4eec\u4ece\u6570\u636e\u3001\u6a21\u578b\u548c\u5185\u5b58\u7684\u89d2\u5ea6\u91cd\u65b0\u5e73\u8861\u4e86\u8ba1\u7b97\u8d1f\u8f7d\u4ee5\u89e3\u51b3\u6b64\u95ee\u9898\uff0c\u4ece\u800c\u5728\u8bbe\u5907\u4e4b\u95f4\u5b9e\u73b0\u4e86\u66f4\u5e73\u8861\u7684\u8ba1\u7b97\u3002\u8fd9\u4e09\u4e2a\u7ec4\u4ef6\u4e0d\u662f\u72ec\u7acb\u7684\uff0c\u800c\u662f\u7d27\u5bc6\u8fde\u63a5\u7684\uff0c\u5f62\u6210\u4e86\u4e00\u4e2a\u5168\u5b87\u5b99\u5e73\u8861\u8bad\u7ec3\u6846\u67b6\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5bf9\u4e8e\u6570\u636e\uff0c\u6211\u4eec\u5c06\u5b9e\u4f8b\u5206\u7ec4\u5230\u8bbe\u5907\u5185\u90e8\u548c\u8bbe\u5907\u4e4b\u95f4\u7684\u65b0\u7684\u5e73\u8861\u8ff7\u4f60\u6279\u6b21\u4e2d\u3002\u5bf9\u4e8e\u6a21\u578b\uff0c\u6211\u4eec\u91c7\u7528\u4e86\u4e00\u79cd\u57fa\u4e8e\u641c\u7d22\u7684\u65b9\u6cd5\u6765\u5b9e\u73b0\u66f4\u5e73\u8861\u7684\u5206\u533a\u3002\u5bf9\u4e8e\u5185\u5b58\u4f18\u5316\uff0c\u6211\u4eec\u81ea\u9002\u5e94\u5730\u8c03\u6574\u4e86\u6bcf\u4e2a\u5206\u533a\u7684\u91cd\u65b0\u8ba1\u7b97\u7b56\u7565\uff0c\u4ee5\u5145\u5206\u5229\u7528\u53ef\u7528\u5185\u5b58\u3002\u6211\u4eec\u8fdb\u884c\u4e86\u5e7f\u6cdb\u7684\u5b9e\u9a8c\u6765\u9a8c\u8bc1\u6211\u4eec\u65b9\u6cd5\u7684\u6709\u6548\u6027\u3002\u4e0e InternVL-Chat \u7684\u5f00\u6e90\u8bad\u7ec3\u4ee3\u7801\u76f8\u6bd4\uff0c\u6211\u4eec\u663e\u7740\u51cf\u5c11\u4e86 GPU \u5929\u6570\uff0c\u5b9e\u73b0\u4e86\u7ea6 1.8 \u500d\u7684\u52a0\u901f\u3002\u6211\u4eec\u65b9\u6cd5\u7684\u6709\u6548\u6027\u548c\u666e\u904d\u6027\u5728\u5404\u79cd\u6a21\u578b\u548c\u6570\u636e\u96c6\u4e0a\u5f97\u5230\u4e86\u8fdb\u4e00\u6b65\u8bc1\u660e\u3002\u4ee3\u7801\u5c06\u5728 https://github.com/ModelTC/OmniBal \u4e0a\u53d1\u5e03\u3002", "author": "Yongqiang Yao et.al.", "authors": "Yongqiang Yao, Jingru Tan, Jiahao Hu, Feizhao Zhang, Xin Jin, Bo Li, Ruihao Gong, Pengfei Liu", "id": "2407.20761v1", "paper_url": "http://arxiv.org/abs/2407.20761v1", "repo": "https://github.com/modeltc/omnibal"}}