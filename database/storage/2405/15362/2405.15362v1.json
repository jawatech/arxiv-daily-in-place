{"2405.15362": {"publish_time": "2024-05-24", "title": "Pipeline Parallelism with Controllable Memory", "paper_summary": "Pipeline parallelism has been widely explored, but most existing schedules\nlack a systematic methodology. In this paper, we propose a framework to\ndecompose pipeline schedules as repeating a building block and we show that the\nlifespan of the building block decides the peak activation memory of the\npipeline schedule. Guided by the observations, we find that almost all existing\npipeline schedules, to the best of our knowledge, are memory inefficient. To\naddress this, we introduce a family of memory efficient building blocks with\ncontrollable activation memory, which can reduce the peak activation memory to\n1/2 of 1F1B without sacrificing efficiency, and even to 1/3 with comparable\nthroughput. We can also achieve almost zero pipeline bubbles while maintaining\nthe same activation memory as 1F1B. Our evaluations demonstrate that in pure\npipeline parallelism settings, our methods outperform 1F1B by from 7% to 55% in\nterms of throughput. When employing a grid search over hybrid parallelism\nhyperparameters in practical scenarios, our proposed methods demonstrate a 16%\nthroughput improvement over the 1F1B baseline for large language models.", "paper_summary_zh": "\u7ba1\u9053\u5e76\u884c\u5df2\u5f97\u5230\u5e7f\u6cdb\u63a2\u7d22\uff0c\u4f46\u5927\u591a\u6570\u73b0\u6709\u8ba1\u5212\u7f3a\u4e4f\u7cfb\u7edf\u7684\u65b9\u6cd5\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u4e2a\u6846\u67b6\uff0c\u5c06\u7ba1\u9053\u8ba1\u5212\u5206\u89e3\u4e3a\u91cd\u590d\u6784\u5efa\u5757\uff0c\u5e76\u4e14\u6211\u4eec\u8868\u660e\u6784\u5efa\u5757\u7684\u751f\u547d\u5468\u671f\u51b3\u5b9a\u4e86\u7ba1\u9053\u8ba1\u5212\u7684\u5cf0\u503c\u6fc0\u6d3b\u5185\u5b58\u3002\u5728\u89c2\u5bdf\u7684\u6307\u5bfc\u4e0b\uff0c\u6211\u4eec\u53d1\u73b0\u51e0\u4e4e\u6240\u6709\u73b0\u6709\u7684\u7ba1\u9053\u8ba1\u5212\uff0c\u636e\u6211\u4eec\u6240\u77e5\uff0c\u90fd\u662f\u5185\u5b58\u6548\u7387\u4f4e\u4e0b\u7684\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u4e00\u7cfb\u5217\u5177\u6709\u53ef\u63a7\u6fc0\u6d3b\u5185\u5b58\u7684\u5185\u5b58\u9ad8\u6548\u6784\u5efa\u5757\uff0c\u5b83\u53ef\u4ee5\u5728\u4e0d\u727a\u7272\u6548\u7387\u7684\u60c5\u51b5\u4e0b\u5c06\u5cf0\u503c\u6fc0\u6d3b\u5185\u5b58\u51cf\u5c11\u5230 1F1B \u7684 1/2\uff0c\u751a\u81f3\u5728\u5177\u6709\u53ef\u6bd4\u541e\u5410\u91cf\u7684\u60c5\u51b5\u4e0b\u51cf\u5c11\u5230 1/3\u3002\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u4e0e 1F1B \u76f8\u540c\u7684\u6fc0\u6d3b\u5185\u5b58\u7684\u60c5\u51b5\u4e0b\u5b9e\u73b0\u51e0\u4e4e\u4e3a\u96f6\u7684\u7ba1\u9053\u6c14\u6ce1\u3002\u6211\u4eec\u7684\u8bc4\u4f30\u8868\u660e\uff0c\u5728\u7eaf\u7ba1\u9053\u5e76\u884c\u8bbe\u7f6e\u4e2d\uff0c\u6211\u4eec\u7684\u65b9\u6cd5\u5728\u541e\u5410\u91cf\u65b9\u9762\u6bd4 1F1B \u9ad8\u51fa 7% \u81f3 55%\u3002\u5728\u5b9e\u9645\u573a\u666f\u4e2d\u5bf9\u6df7\u5408\u5e76\u884c\u8d85\u53c2\u6570\u91c7\u7528\u7f51\u683c\u641c\u7d22\u65f6\uff0c\u6211\u4eec\u63d0\u51fa\u7684\u65b9\u6cd5\u5c55\u793a\u4e86\u6bd4 1F1B \u57fa\u7ebf\u9ad8\u51fa 16% \u7684\u541e\u5410\u91cf\u6539\u8fdb\uff0c\u9002\u7528\u4e8e\u5927\u578b\u8bed\u8a00\u6a21\u578b\u3002", "author": "Penghui Qi et.al.", "authors": "Penghui Qi, Xinyi Wan, Nyamdavaa Amar, Min Lin", "id": "2405.15362v1", "paper_url": "http://arxiv.org/abs/2405.15362v1", "repo": "null"}}