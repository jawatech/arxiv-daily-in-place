{"2411.18553": {"publish_time": "2024-11-27", "title": "Retrofitting (Large) Language Models with Dynamic Tokenization", "paper_summary": "Current language models (LMs) use a fixed, static subword tokenizer. This\nchoice, often taken for granted, typically results in degraded efficiency and\ncapabilities in languages other than English, and makes it challenging to apply\nLMs to new domains or languages. To address these issues, we propose\nretrofitting LMs with dynamic tokenization: a way to dynamically decide on\ntoken boundaries based on the input text. For encoder-style models, we\nintroduce a subword-merging algorithm inspired by byte-pair encoding (BPE), but\nat a batch level. We merge frequent subword sequences in a batch, then apply a\npretrained embedding-prediction hypernetwork to compute the token embeddings\non-the-fly. When applied with word-level boundaries, this on average reduces\ntoken sequence lengths by >20% across 14 languages on XNLI with XLM-R while\ndegrading its task performance by less than 2%. For decoder-style models, we\napply dynamic tokenization in two ways: 1) for prefilling, maintaining\nperformance of Mistral-7B almost completely with up to 40% sequence reduction -\nrelative to the word-level; and 2) via an approximate nearest neighbor index,\nachieving fast generation with a one million token vocabulary, demonstrating\nscalability to even larger, dynamic vocabularies. Overall, our findings show\nthat dynamic tokenization substantially improves inference speed and promotes\nfairness across languages, making a leap towards overcoming the limitations of\nstatic tokenization and enabling more equitable and adaptable LMs.", "paper_summary_zh": "\u7576\u524d\u8a9e\u8a00\u6a21\u578b\uff08LM\uff09\u4f7f\u7528\u56fa\u5b9a\u3001\u975c\u614b\u7684\u5b50\u5b57\u8a5e\u5206\u8a5e\u5668\u3002\u9019\u7a2e\u9078\u64c7\u901a\u5e38\u88ab\u8996\u70ba\u7406\u6240\u7576\u7136\uff0c\u901a\u5e38\u6703\u5c0e\u81f4\u82f1\u8a9e\u4ee5\u5916\u7684\u8a9e\u8a00\u6548\u7387\u548c\u80fd\u529b\u964d\u4f4e\uff0c\u4e26\u4f7f\u5c07 LM \u61c9\u7528\u65bc\u65b0\u9818\u57df\u6216\u8a9e\u8a00\u8b8a\u5f97\u5177\u6709\u6311\u6230\u6027\u3002\u70ba\u4e86\u89e3\u6c7a\u9019\u4e9b\u554f\u984c\uff0c\u6211\u5011\u5efa\u8b70\u4f7f\u7528\u52d5\u614b\u5206\u8a5e\u6539\u9020 LM\uff1a\u4e00\u7a2e\u6839\u64da\u8f38\u5165\u6587\u5b57\u52d5\u614b\u6c7a\u5b9a\u5206\u8a5e\u908a\u754c\u7684\u9014\u5f91\u3002\u5c0d\u65bc\u7de8\u78bc\u5668\u6a23\u5f0f\u6a21\u578b\uff0c\u6211\u5011\u5f15\u5165\u4e86\u4e00\u500b\u53d7\u4f4d\u5143\u7d44\u5c0d\u7de8\u78bc\uff08BPE\uff09\u555f\u767c\u7684\u5b50\u5b57\u8a5e\u5408\u4f75\u6f14\u7b97\u6cd5\uff0c\u4f46\u8655\u65bc\u6279\u6b21\u5c64\u7d1a\u3002\u6211\u5011\u5408\u4f75\u6279\u6b21\u4e2d\u983b\u7e41\u7684\u5b50\u5b57\u8a5e\u5e8f\u5217\uff0c\u7136\u5f8c\u61c9\u7528\u9810\u8a13\u7df4\u7684\u5d4c\u5165\u9810\u6e2c\u8d85\u7db2\u8def\u4f86\u5373\u6642\u8a08\u7b97\u5206\u8a5e\u5d4c\u5165\u3002\u7576\u8207\u5b57\u5143\u7d1a\u5225\u908a\u754c\u4e00\u8d77\u61c9\u7528\u6642\uff0c\u9019\u5e73\u5747\u5c07 14 \u7a2e\u8a9e\u8a00\u5728 XNLI \u4e0a\u4f7f\u7528 XLM-R \u7684\u5206\u8a5e\u5e8f\u5217\u9577\u5ea6\u6e1b\u5c11\u4e86 >20%\uff0c\u540c\u6642\u5176\u4efb\u52d9\u6548\u80fd\u4e0b\u964d\u4e0d\u5230 2%\u3002\u5c0d\u65bc\u89e3\u78bc\u5668\u6a23\u5f0f\u6a21\u578b\uff0c\u6211\u5011\u4ee5\u5169\u7a2e\u65b9\u5f0f\u61c9\u7528\u52d5\u614b\u5206\u8a5e\uff1a1\uff09\u5c0d\u65bc\u9810\u586b\uff0c\u5e7e\u4e4e\u5b8c\u5168\u4fdd\u6301 Mistral-7B \u7684\u6548\u80fd\uff0c\u5e8f\u5217\u6e1b\u5c11\u5e45\u5ea6\u9ad8\u9054 40% - \u76f8\u5c0d\u65bc\u5b57\u5143\u7d1a\u5225\uff1b\u4ee5\u53ca 2\uff09\u900f\u904e\u8fd1\u4f3c\u6700\u8fd1\u9130\u7d22\u5f15\uff0c\u5be6\u73fe\u4f7f\u7528\u4e00\u767e\u842c\u500b\u5206\u8a5e\u8a5e\u5f59\u7684\u5feb\u901f\u751f\u6210\uff0c\u8b49\u660e\u4e86\u53ef\u64f4\u5145\u6027\u751a\u81f3\u66f4\u5927\u3001\u52d5\u614b\u7684\u8a5e\u5f59\u3002\u7e3d\u9ad4\u800c\u8a00\uff0c\u6211\u5011\u7684\u7814\u7a76\u7d50\u679c\u8868\u660e\u52d5\u614b\u5206\u8a5e\u986f\u8457\u63d0\u9ad8\u4e86\u63a8\u8ad6\u901f\u5ea6\uff0c\u4e26\u4fc3\u9032\u4e86\u8de8\u8a9e\u8a00\u7684\u516c\u5e73\u6027\uff0c\u671d\u8457\u514b\u670d\u975c\u614b\u5206\u8a5e\u7684\u9650\u5236\u9081\u9032\u4e86\u4e00\u6b65\uff0c\u4e26\u5be6\u73fe\u4e86\u66f4\u516c\u5e73\u3001\u66f4\u5177\u9069\u61c9\u6027\u7684 LM\u3002", "author": "Darius Feher et.al.", "authors": "Darius Feher, Benjamin Minixhofer, Ivan Vuli\u0107", "id": "2411.18553v1", "paper_url": "http://arxiv.org/abs/2411.18553v1", "repo": "null"}}