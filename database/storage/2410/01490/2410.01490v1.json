{"2410.01490": {"publish_time": "2024-10-02", "title": "Extending Context Window of Large Language Models from a Distributional Perspective", "paper_summary": "Scaling the rotary position embedding (RoPE) has become a common method for\nextending the context window of RoPE-based large language models (LLMs).\nHowever, existing scaling methods often rely on empirical approaches and lack a\nprofound understanding of the internal distribution within RoPE, resulting in\nsuboptimal performance in extending the context window length. In this paper,\nwe propose to optimize the context window extending task from the view of\nrotary angle distribution. Specifically, we first estimate the distribution of\nthe rotary angles within the model and analyze the extent to which length\nextension perturbs this distribution. Then, we present a novel extension\nstrategy that minimizes the disturbance between rotary angle distributions to\nmaintain consistency with the pre-training phase, enhancing the model's\ncapability to generalize to longer sequences. Experimental results compared to\nthe strong baseline methods demonstrate that our approach reduces by up to 72%\nof the distributional disturbance when extending LLaMA2's context window to 8k,\nand reduces by up to 32% when extending to 16k. On the LongBench-E benchmark,\nour method achieves an average improvement of up to 4.33% over existing\nstate-of-the-art methods. Furthermore, Our method maintains the model's\nperformance on the Hugging Face Open LLM benchmark after context window\nextension, with only an average performance fluctuation ranging from -0.12 to\n+0.22.", "paper_summary_zh": "<paragraph>\u64f4\u5c55\u65cb\u8f49\u4f4d\u7f6e\u5d4c\u5165 (RoPE) \u5df2\u6210\u70ba\u64f4\u5c55\u57fa\u65bc RoPE \u7684\u5927\u578b\u8a9e\u8a00\u6a21\u578b (LLM) \u7684\u4e0a\u4e0b\u6587\u8996\u7a97\u7684\u5e38\u898b\u65b9\u6cd5\u3002\n\u7136\u800c\uff0c\u73fe\u6709\u7684\u64f4\u5c55\u65b9\u6cd5\u901a\u5e38\u4f9d\u8cf4\u65bc\u7d93\u9a57\u65b9\u6cd5\uff0c\u4e26\u4e14\u7f3a\u4e4f\u5c0d RoPE \u5167\u90e8\u5206\u4f48\u7684\u6df1\u5165\u7406\u89e3\uff0c\u5c0e\u81f4\u5728\u64f4\u5c55\u4e0a\u4e0b\u6587\u8996\u7a97\u9577\u5ea6\u6642\u6027\u80fd\u4e0d\u4f73\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u5011\u5efa\u8b70\u5f9e\u65cb\u8f49\u89d2\u5ea6\u5206\u4f48\u7684\u89d2\u5ea6\u512a\u5316\u4e0a\u4e0b\u6587\u8996\u7a97\u64f4\u5c55\u4efb\u52d9\u3002\u5177\u9ad4\u4f86\u8aaa\uff0c\u6211\u5011\u9996\u5148\u4f30\u8a08\u6a21\u578b\u4e2d\u65cb\u8f49\u89d2\u5ea6\u7684\u5206\u4f48\uff0c\u4e26\u5206\u6790\u9577\u5ea6\u64f4\u5c55\u64fe\u52d5\u6b64\u5206\u4f48\u7684\u7a0b\u5ea6\u3002\u7136\u5f8c\uff0c\u6211\u5011\u63d0\u51fa\u4e86\u4e00\u7a2e\u65b0\u7684\u64f4\u5c55\u7b56\u7565\uff0c\u5c07\u65cb\u8f49\u89d2\u5ea6\u5206\u4f48\u4e4b\u9593\u7684\u64fe\u52d5\u6700\u5c0f\u5316\uff0c\u4ee5\u4fdd\u6301\u8207\u9810\u8a13\u7df4\u968e\u6bb5\u7684\u4e00\u81f4\u6027\uff0c\u589e\u5f37\u6a21\u578b\u5c0d\u66f4\u9577\u5e8f\u5217\u7684\u6cdb\u5316\u80fd\u529b\u3002\u8207\u5f37\u57fa\u7dda\u65b9\u6cd5\u76f8\u6bd4\u7684\u5be6\u9a57\u7d50\u679c\u8868\u660e\uff0c\u6211\u5011\u7684\u6a21\u578b\u5728\u5c07 LLaMA2 \u7684\u4e0a\u4e0b\u6587\u8996\u7a97\u64f4\u5c55\u5230 8k \u6642\u6e1b\u5c11\u4e86\u9ad8\u9054 72% \u7684\u5206\u4f48\u64fe\u52d5\uff0c\u5728\u64f4\u5c55\u5230 16k \u6642\u6e1b\u5c11\u4e86\u9ad8\u9054 32%\u3002\u5728 LongBench-E \u57fa\u6e96\u6e2c\u8a66\u4e2d\uff0c\u6211\u5011\u7684\u6a21\u578b\u6bd4\u73fe\u6709\u7684\u6700\u5148\u9032\u65b9\u6cd5\u5e73\u5747\u63d0\u9ad8\u4e86 4.33%\u3002\u6b64\u5916\uff0c\u6211\u5011\u7684\u6a21\u578b\u5728\u4e0a\u4e0b\u6587\u8996\u7a97\u64f4\u5c55\u5f8c\u5728 Hugging Face Open LLM \u57fa\u6e96\u6e2c\u8a66\u4e2d\u4fdd\u6301\u4e86\u6a21\u578b\u7684\u6027\u80fd\uff0c\u5e73\u5747\u6027\u80fd\u6ce2\u52d5\u50c5\u5728 -0.12 \u5230 +0.22 \u4e4b\u9593\u3002</paragraph>", "author": "Yingsheng Wu. Yuxuan Gu et.al.", "authors": "Yingsheng Wu. Yuxuan Gu, Xiaocheng Feng, Weihong Zhong, Dongliang Xu, Qing Yang, Hongtao Liu, Bing Qin", "id": "2410.01490v1", "paper_url": "http://arxiv.org/abs/2410.01490v1", "repo": "https://github.com/1180301012/DPRoPE"}}