{"2408.11396": {"publish_time": "2024-08-21", "title": "MoE-LPR: Multilingual Extension of Large Language Models through Mixture-of-Experts with Language Priors Routing", "paper_summary": "Large Language Models (LLMs) are often English-centric due to the\ndisproportionate distribution of languages in their pre-training data.\nEnhancing non-English language capabilities through post-pretraining often\nresults in catastrophic forgetting of the ability of original languages.\nPrevious methods either achieve good expansion with severe forgetting or slight\nforgetting with poor expansion, indicating the challenge of balancing language\nexpansion while preventing forgetting. In this paper, we propose a method\ncalled MoE-LPR (Mixture-of-Experts with Language Priors Routing) to alleviate\nthis problem. MoE-LPR employs a two-stage training approach to enhance the\nmultilingual capability. First, the model is post-pretrained into a\nMixture-of-Experts (MoE) architecture by upcycling, where all the original\nparameters are frozen and new experts are added. In this stage, we focus\nimproving the ability on expanded languages, without using any original\nlanguage data. Then, the model reviews the knowledge of the original languages\nwith replay data amounting to less than 1% of post-pretraining, where we\nincorporate language priors routing to better recover the abilities of the\noriginal languages. Evaluations on multiple benchmarks show that MoE-LPR\noutperforms other post-pretraining methods. Freezing original parameters\npreserves original language knowledge while adding new experts preserves the\nlearning ability. Reviewing with LPR enables effective utilization of\nmultilingual knowledge within the parameters. Additionally, the MoE\narchitecture maintains the same inference overhead while increasing total model\nparameters. Extensive experiments demonstrate MoE-LPR's effectiveness in\nimproving expanded languages and preserving original language proficiency with\nsuperior scalability. Code and scripts are freely available at\nhttps://github.com/zjwang21/MoE-LPR.git.", "paper_summary_zh": "\u5927\u578b\u8a9e\u8a00\u6a21\u578b\uff08LLM\uff09\u901a\u5e38\u4ee5\u82f1\u8a9e\u70ba\u4e2d\u5fc3\uff0c\u56e0\u70ba\u5728\u9810\u8a13\u7df4\u8cc7\u6599\u4e2d\u8a9e\u8a00\u5206\u4f48\u4e0d\u5747\u8861\u3002\u900f\u904e\u5f8c\u9810\u8a13\u7df4\u589e\u5f37\u975e\u82f1\u8a9e\u8a9e\u8a00\u80fd\u529b\u901a\u5e38\u6703\u5c0e\u81f4\u539f\u672c\u8a9e\u8a00\u80fd\u529b\u7684\u707d\u96e3\u6027\u907a\u5fd8\u3002\u5148\u524d\u7684\u505a\u6cd5\u4e0d\u662f\u9054\u5230\u826f\u597d\u7684\u64f4\u5145\uff0c\u4f46\u6709\u56b4\u91cd\u7684\u907a\u5fd8\uff0c\u5c31\u662f\u907a\u5fd8\u8f15\u5fae\u4f46\u64f4\u5145\u4e0d\u826f\uff0c\u9019\u8868\u793a\u5728\u9632\u6b62\u907a\u5fd8\u7684\u540c\u6642\u5e73\u8861\u8a9e\u8a00\u64f4\u5145\u7684\u6311\u6230\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u5011\u63d0\u51fa\u4e00\u500b\u7a31\u70ba MoE-LPR\uff08\u6df7\u5408\u5c08\u5bb6\u8207\u8a9e\u8a00\u5148\u9a57\u8def\u7531\uff09\u7684\u65b9\u6cd5\u4f86\u6e1b\u8f15\u9019\u500b\u554f\u984c\u3002MoE-LPR \u63a1\u7528\u5169\u968e\u6bb5\u7684\u8a13\u7df4\u65b9\u6cd5\u4f86\u589e\u5f37\u591a\u8a9e\u8a00\u80fd\u529b\u3002\u9996\u5148\uff0c\u6a21\u578b\u900f\u904e\u5347\u7d1a\u5f8c\u9810\u8a13\u7df4\u6210\u6df7\u5408\u5c08\u5bb6\uff08MoE\uff09\u67b6\u69cb\uff0c\u5176\u4e2d\u6240\u6709\u539f\u672c\u7684\u53c3\u6578\u90fd\u6703\u51cd\u7d50\uff0c\u4e26\u52a0\u5165\u65b0\u7684\u5c08\u5bb6\u3002\u5728\u9019\u500b\u968e\u6bb5\uff0c\u6211\u5011\u5c08\u6ce8\u65bc\u63d0\u5347\u64f4\u5145\u8a9e\u8a00\u7684\u80fd\u529b\uff0c\u800c\u4e0d\u4f7f\u7528\u4efb\u4f55\u539f\u672c\u7684\u8a9e\u8a00\u8cc7\u6599\u3002\u63a5\u8457\uff0c\u6a21\u578b\u6703\u6aa2\u8996\u539f\u672c\u8a9e\u8a00\u7684\u77e5\u8b58\uff0c\u4e26\u4f7f\u7528\u5c11\u65bc 1% \u5f8c\u9810\u8a13\u7df4\u7684\u91cd\u64ad\u8cc7\u6599\uff0c\u5176\u4e2d\u6211\u5011\u7d0d\u5165\u8a9e\u8a00\u5148\u9a57\u8def\u7531\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u6062\u5fa9\u539f\u672c\u8a9e\u8a00\u7684\u80fd\u529b\u3002\u5728\u591a\u500b\u57fa\u6e96\u4e0a\u7684\u8a55\u4f30\u986f\u793a\uff0cMoE-LPR \u7684\u8868\u73fe\u512a\u65bc\u5176\u4ed6\u5f8c\u9810\u8a13\u7df4\u65b9\u6cd5\u3002\u51cd\u7d50\u539f\u672c\u7684\u53c3\u6578\u53ef\u4ee5\u4fdd\u7559\u539f\u672c\u7684\u8a9e\u8a00\u77e5\u8b58\uff0c\u540c\u6642\u52a0\u5165\u65b0\u7684\u5c08\u5bb6\u53ef\u4ee5\u4fdd\u7559\u5b78\u7fd2\u80fd\u529b\u3002\u4f7f\u7528 LPR \u6aa2\u8996\u53ef\u4ee5\u6709\u6548\u5229\u7528\u53c3\u6578\u4e2d\u7684\u591a\u8a9e\u8a00\u77e5\u8b58\u3002\u6b64\u5916\uff0cMoE \u67b6\u69cb\u5728\u589e\u52a0\u7e3d\u6a21\u578b\u53c3\u6578\u7684\u540c\u6642\uff0c\u7dad\u6301\u76f8\u540c\u7684\u63a8\u8ad6\u958b\u92b7\u3002\u5ee3\u6cdb\u7684\u5be6\u9a57\u8b49\u660e\u4e86 MoE-LPR \u5728\u63d0\u5347\u64f4\u5145\u8a9e\u8a00\u548c\u4fdd\u7559\u539f\u672c\u8a9e\u8a00\u80fd\u529b\u65b9\u9762\u7684\u6548\u80fd\uff0c\u4e26\u5177\u6709\u512a\u7570\u7684\u53ef\u64f4\u5145\u6027\u3002\u7a0b\u5f0f\u78bc\u548c\u6307\u4ee4\u78bc\u53ef\u65bc https://github.com/zjwang21/MoE-LPR.git \u514d\u8cbb\u53d6\u5f97\u3002", "author": "Hao Zhou et.al.", "authors": "Hao Zhou, Zhijun Wang, Shujian Huang, Xin Huang, Xue Han, Junlan Feng, Chao Deng, Weihua Luo, Jiajun Chen", "id": "2408.11396v1", "paper_url": "http://arxiv.org/abs/2408.11396v1", "repo": "https://github.com/zjwang21/moe-lpr"}}